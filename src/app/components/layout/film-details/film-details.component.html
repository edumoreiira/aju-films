<article class="flex flex-col rounded-2xl border border-stone-200 max-w-[700px] mx-auto shadow-sm overflow-hidden">
<div class="bg-stone-200 p-2 flex items-center justify-between">
  <div class="flex items-center">
    @for(item of films() ; track $index) {
      @if(!($index === 0 || $index === films().length -1)) {
        <button class="py-1 px-2 sm:px-1.5 cursor-pointer group"
        (click)="navigateToItem($index)">
          <span class="block h-2.5 w-2.5 rounded-full
          transition-colors"
          [ngClass]="state().currentItem === $index ? 'bg-stone-500' : 'bg-stone-300 group-hover:bg-stone-400'"></span>
        </button>
      }
    }
  </div>
  @if(state().autoslide) {
    <button class="p-1"
    (click)="stopAutoSlide()">
      <i class="fi fi-sr-pause flex text-xs text-stone-500"></i>
      <span class="sr-only">Pausar auto-seleção</span>
    </button>
  } @else {
    <button class="p-1"
    (click)="startAutoSlide()">
      <i class="fi fi-sr-play flex text-xs text-stone-500"></i>
      <span class="sr-only">Iniciar auto-seleção</span>
    </button>
  }
  
</div>

<div #containerEl class="flex flex-nowrap w-full transition-transform duration-500"
(mousedown)="onMouseDown($event, containerEl)"
(touchstart)="onTouchStart($event, containerEl)"
(dragstart)="$event.preventDefault()"
(transitionend)="onTransitionEnd()">
  @for (item of films(); track $index) {
    <div #itemEl class="basis-[100%] shrink-0 overflow-hidden flex flex-col justify-between active:cursor-grabbing">
      <div class="p-5 flex flex-col gap-4">
        @switch (item.top_seller) {
          @case (true) {
            <div class="flex gap-2 items-center flex-wrap">
              <h1 class="text-xl font-medium">{{ item.title }}</h1>
              <div class="flex items-center gap-1 text-xs px-2 py-1 border rounded-full border-orange-300 bg-orange-300/10">
                <i class="fi fi-sr-fire-flame-curved flex text-orange-300"></i>
                <span class="text-stone-500">Mais vendidos</span>
              </div>
            </div>
          }
          @default {
            <h1 class="text-xl font-medium">{{ item.title }}</h1>
          }
        }
    
        <div>
          <p class="text-stone-600">{{ item.text }}</p>
        </div>
      
      </div>
      <div class="flex items-start gap-6 rounded-xl m-1.5 bg-stone-100 px-8 py-4 justify-around">
        @for (info of item.info; track $index) {
          <div class="text-center">
            <p class="text-xl text-stone-900 ">{{ info.large_text }}</p>
            <p class="text-stone-500 text-sm">{{ info.small_text }}</p>
          </div>
        }
      </div>
    </div>
  }
</div>
</article>
